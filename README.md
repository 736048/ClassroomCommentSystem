# CCS (Classroom Comment System)

授業やプレゼンテーション、イベントをリアルタイムで双方向化する、スタイリッシュなコメント共有・演出システムです。
生徒がスマートフォンから送信したコメントが、スクリーンの最前面（スライドの上など）に美しく表示されます。

## 特徴

### 1. 「蛍（ホタル）方式」のコメント表示
従来のスクロール方式ではなく、画面上のランダムな位置にふわっと現れて消える方式を採用しています。
*   **視認性**: プレゼン資料を遮り続けず、かつ重要なコメントが目に留まりやすい設計です。
*   **特許への配慮**: 既存のスクロール表示に関する特許リスクを回避した独自の実装です。

### 2. 強力な先生用「コックピット」管理画面
先生側の画面は、単なる送信フォームではなく、プレゼンを円滑にするための統合管理ツールです。
*   **2カラム・レスポンシブレイアウト**: PCやタブレットでの操作に最適化された、効率的な配置。
*   **図形・固定管理パレット**: 
    *   画面プレビューを模したキャンバス上で、図形（丸、四角、直線）を自由に追加・移動・変形できます。
    *   固定コメントもパレット上でドラッグして、投影画面の好きな位置に配置可能です。
    *   不要なオブジェクトは選択して `Delete` キーで即座に削除できます。
*   **プレゼン補助タブ**:
    *   **経過時間タイマー**: 発表のペース配分を確認できるストップウォッチ機能。
    *   **PowerPointノート同期 (Mac専用)**: スライドショーと連動し、手元の画面に現在のスライドの「ノート（カンペ）」を自動表示します。
*   **詳細設定**: フォント（ゴシック/明朝）、サイズ（標準/大）、色（5色+α）、固定表示などをスマートに管理できます。

### 3. スマートな接続管理
*   **ダイナミック・ポート変更**: 現場のネットワーク環境に合わせて、起動後にポート番号を自由に変更できます。
*   **巨大QRコード表示**: ボタン一つで、管理画面と投影画面の両方に巨大な接続用QRコードを表示。後ろの席の生徒でも簡単に参加できます。
*   **マルチディスプレイ対応**: 外部モニターやプロジェクターを接続している場合、自動的にそちらを認識して全画面で表示されます。

### 4. ブルータリズム・デザイン
モノトーンを基調とした、角ばった力強いデザインを採用。
*   **フォント自動調整**: ウィンドウサイズに応じてUIの文字サイズが自動的にスケーリングされます。
*   **生徒用画面**: 極限までシンプルに。迷わずコメントを送信でき、自分や他人の過去ログも手元で確認できます。

## セットアップ

### 必要条件
*   **Node.js** (LTS推奨)
*   **macOS** (PowerPoint同期機能を使用する場合)

### インストール
プロジェクトのディレクトリで以下のコマンドを実行してください。
```bash
npm install
```

### 起動
```bash
npm start
```

## 使い方

1.  **準備**: アプリを起動すると、コメント表示用の透過ウィンドウと管理画面が開きます。
2.  **投影**: プロジェクター側の画面に透過ウィンドウがフルスクリーンで表示されていることを確認します。
3.  **参加**: 管理画面の「QRコード表示」を押し、生徒にスマートフォンで読み取ってもらいます。
4.  **演出**: 
    *   生徒からのコメントは自動的に画面に現れます。
    *   重要な内容は先生側から「固定コメント」として送信し、パレットで位置を微調整してください。
    *   注目させたい場所には図形パレットから赤い枠などを配置してください。
5.  **補助**: 発表中は「補助」タブに切り替えて、経過時間やPowerPointのノートを確認しながら進行します。

## ファイル構成
*   `main.js`: Electronメインプロセス（ウィンドウ管理、AppleScript連携、ポート制御）。
*   `server/app.js`: 通信サーバー（Socket.io）およびNGワード処理。
*   `server/ng_words.json`: 永続化されたNGワードリスト。
*   `renderer/`:
    *   `control.html / .js`: 先生用管理画面のUIとロジック。
    *   `overlay.html / .js / .css`: 投影用透過画面のUIとアニメーション。
*   `public/`: 生徒用Webページ。

## 技術スタック
*   **Framework**: Electron
*   **Backend**: Node.js, Express
*   **Real-time**: Socket.io
*   **Utility**: QRCode, AppleScript (for PPT Sync)
*   **Styling**: CSS Custom Properties (clamp, aspect-ratio, grid)

## ライセンス
ISC
